<!DOCTYPE HTML>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Zipper: Asset Packaging for Maven</title>
  <head>
  <body>
    <h1>Zipper</h1>
    <p>
      <a href="http://github.com/joestelmach/zipper">Zipper</a> is a
      full-featured asset packaging plugin for Maven that provides JavaScript
      lint lint checking, Closure Compiler and YUI Compressor support, CSS
      and JavaScript concatenation, and up-front gzipping. 
    </p>

    <h2>Getting Started</h2>
    <ol>
      <li>
        Add the following plugin definition to the build section of your POM
        file:

<pre><code>&lt;plugin&gt;
  &lt;groupId&gt;com.joestelmach&lt;groupId&gt;
  &lt;artifactId&gt;zipper&lt;artifactId&gt;
  &lt;version&gt;0.1-SNAPSHOT&lt;version&gt;
  &lt;configuration&gt;
  ...
  &lt;configuration&gt;
  &lt;executions&gt;
    &lt;execution&gt;
      &lt;goals&gt;
        &lt;phase&gt;process-resources&lt;phase&gt;
        &lt;goal&gt;pack&lt;goal&gt;
      &lt;goals&gt;
    &lt;execution&gt;
  &lt;executions&gt;
&lt;plugin&gt;</pre></code>
<em>Note: The plugin should be available in the Central Maven Repository
shortly.</em>
      </li>

      <li>
        <a href="#configuration">Configure</a> zipper to your needs
      </li>

      <li>Enjoy faster page loads</li>
    </ol>

    <h3 id="configuration">Configuration</h3>
    <p>
      Zipper's configuration options can be broken down into four sections: 
      <a href="#configuration_lint"> JavaScript lint</a>, 
      <a href="#configuration_js_optimization">JavaScript optimization</a>,
      <a href="#configration_css">CSS minification</a>, and
      <a href="#configration_groupint">asset grouping.</a>
    </p>

    <dl>
      <dt id="configuration_lint">JavaScript lint</dt>
      <dd>
        <p>
          Zipper will run your JavaScript through the excellent 
          <a href="http://www.jslint.com/">JSLint</a> code quality tool by
          default, and report any warnings found.  If you wish to skip this 
          check, pass the <em>lintSkip</em> option:
          <code>&lt;lintSkip&gt;true&lt;/lintSkip&gt;</code>
        </p>

        <p>
          If you would like to run the lint check but exclude certain
          files, use the <em>lintExcludes</em> option:
<pre><code>&lt;lintExcludes&gt;
  &lt;lintExclude&gt;prototype.js&lt;lintExclude&gt;
  &lt;lintExclude&gt;scriptaculous.js&lt;lintExclude&gt;
&lt;lintExcludes&gt;</code></pre>
        </p>

        <p>
          You can customize the jslint execution with any combination of 
          <a href="http://www.jslint.com/lint.html#options">defined
          options</a>.  For example, the following will allow bitwise 
          operators and eval statements:
          <pre><code>&lt;lintOptions&gt;
  &lt;bitwise&gt;true&lt;/bitwise&gt;
  &lt;evil&gt;true&lt;/evil&gt;
&lt;/lintOptions&gt;</pre></code>
        </p>
      </dd>
      
      <dt id="configuration_js_optimization">JavaScript Optimization</dt>
      <dd>
        Once lint checking is complete, your JavaScript will be optimized
        using the <a href="http://code.google.com/closure/compiler/">Closure 
        Compiler</a>.  You can control the the Closure execution by passing
        an options string containing any combination of 
        <a href="http://code.google.com/closure/compiler/docs/overview.html">
        documented options</a>.  For example, the following will enable 
        advanced optimizations:
<pre><code>&lt;optimizeOptions&gt;
  --compilation_level ADVANCED_OPTIMIZATIONS
&lt;/optimizeOptions&gt;</pre></code>
      </dd>
      
      <dt id="configration_css">CSS Minification</dt>
      <dd>
        Zipper will pass your CSS files through YUI Compressor's 
        <a href="http://developer.yahoo.com/yui/compressor/css.html">
        CSS minifier</a>.  The only option available to customize the 
        minifier is the minifierLineBreak option, which will force
        a line break in the output at the given column number:
<pre><code>&lt;minifyLineBreak&gt;80&lt;/minifyLineBreak&gt;</code></pre>
      </dd>
      
      <dt id="configration_grouping">Asset Grouping.</dt>
      <dd>
        Zipper's asset grouping feature allows you to group particular assets
        together, in a particular order, into a single gzipped resource.
        JavaScript and CSS groups are configured separately.  Consider the
        following example:

<pre><code>
&lt;groupOutputDirectory&gt;static&lt;groupOutputDirectory&gt;
&lt;javascriptGroups&gt;
  &lt;javascriptGroup&gt;
    &lt;gzip&gt;true&lt;gzip&gt;
    &lt;name&gt;common&lt;name&gt;
    &lt;includes&gt;
      &lt;include&gt;prototype.js&lt;include&gt; 
      &lt;include&gt;**/*.js&lt;include&gt; 
    &lt;includes&gt;
  &lt;javascriptGroup&gt;
&lt;javascriptGroups&gt;
</code></pre>
        <p>
          This example will create one JavaScript asset group consisting of the
          concatenation of the optimized version of prototype.js, followed by
          the optimized versions of all other JavaScript files.  This asset will
          then be gzipped into a new file named according the the name
          option, and saved in a newly created 'static' directory.  The 
          <strong>groupOutputDirectory</strong> and 
          <strong>gzip</strong> options are optional, and default to <strong> 
          'static'</strong> and <strong>true</strong> by default.
        </p>

        <p>
          The stylesheet configuration is nearly identical:
<pre><code>&lt;stylesheetGroups&gt;
  &lt;stylesheetGroup&gt;
    &lt;name&gt;barfoo&lt;name&gt;
    &lt;includes&gt;
      &lt;include&gt;css&lt;include&gt;
    &lt;includes&gt;
  &lt;stylesheetGroup&gt;
&lt;stylesheetGroups&gt;
</code></pre>
        </p>

        <p>
          If you choose not to configure any groups, the default behavior
          will bundle all of your JavaScript files into a single
          script-all.js.gz file, and all of your stylesheets into a single
          style-all.css.gz file.
        </p>



      </dd>
  <body>
</html>

