<!DOCTYPE HTML>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
    <title>zipper: asset packaging for maven</title>

    <script type="text/javascript" src="./javascript/highlight.pack.js"></script>
    <script type="text/javascript">hljs.initHighlightingOnLoad();</script>

    <link rel="stylesheet" href="./style/layout.css" type="text/css" media="screen" /> 
  </head>
  <body>

<pre id="heading">+-++-++-++-++-++-+
|z||i||p||p||e||r|
+-++-++-++-++-++-+</pre>

    <p>
      zipper is a full-featured asset packaging plugin for 
      <a href="http://maven.apache.org/">Maven</a> that aims to optimize
      your project's static resources at build time. 
    </p>
    <p>
      Most of the heavy lifting is done with Google's Closure Compiler and 
      Yahoo's YUI compressor, but you'll also find CSS and JavaScript 
      concatenation and compression, resource cache busting, and automated
      lint checking.
    </p>

    <p>
      The source code can be found on <a href="https://github.com/joestelmach/zipper">github</a>.
      If you're having trouble, please <a href="https://github.com/joestelmach/zipper/issues">let me know</a>.
    </p>
    <p>
      <span class="version">0.1-SNAPSHOT</span> is the current version.
    </p>

    <h2>Getting Started</h2>
    <ol>
      <li>
        Add the following plugin definition to the build section of your POM
        file:

<pre><code>&lt;plugin&gt;
  &lt;groupId&gt;com.joestelmach&lt;groupId&gt;
  &lt;artifactId&gt;zipper&lt;artifactId&gt;
  &lt;version&gt;0.1-SNAPSHOT&lt;version&gt;
  &lt;configuration&gt;
  ...
  &lt;configuration&gt;
  &lt;executions&gt;
    &lt;execution&gt;
      &lt;goals&gt;
        &lt;phase&gt;process-resources&lt;phase&gt;
        &lt;goal&gt;pack&lt;goal&gt;
      &lt;goals&gt;
    &lt;execution&gt;
  &lt;executions&gt;
&lt;plugin&gt;</code></pre>
<em>Note: The plugin should be available in the Central Maven Repository
shortly</em>
      </li>

      <li>
        <a href="#configuration">Configure</a> zipper to your needs
      </li>

      <li>Enjoy faster page loads</li>
    </ol>

    <h3 id="configuration">Configuration</h3>
    <p>
      zipper's configuration can be broken down into four sections: 
      <a href="#configuration_lint"> JavaScript lint</a>, 
      <a href="#configuration_js_optimization">JavaScript optimization</a>,
      <a href="#configration_css">CSS minification</a>, and
      <a href="#configration_grouping">asset grouping.</a>
    </p>

    <dl>
      <dt id="configuration_lint">JavaScript lint</dt>
      <dd>
        <p>
          Zipper will run your JavaScript through the 
          <a href="http://www.jslint.com/">JSLint</a> code quality tool by
          default, and report any warnings found.  If you wish to skip this 
          check, pass the <em>lintSkip</em> option:
        </p>
<pre><code>&lt;lintSkip&gt;true&lt;/lintSkip&gt;</code></pre>

        <p>
          If you would like to run the lint check but exclude certain
          files, use the <em>lintExcludes</em> option:
        </p>
<pre><code>&lt;lintExcludes&gt;
  &lt;lintExclude&gt;prototype.js&lt;lintExclude&gt;
  &lt;lintExclude&gt;scriptaculous.js&lt;lintExclude&gt;
&lt;lintExcludes&gt;</code></pre>

        <p>
          You can customize the jslint execution with any combination of 
          <a href="http://www.jslint.com/lint.html#options">defined
          options</a>.  For example, the following will allow bitwise 
          operators and eval statements:
        </p>
<pre><code>&lt;lintOptions&gt;
  &lt;bitwise&gt;true&lt;/bitwise&gt;
  &lt;evil&gt;true&lt;/evil&gt;
&lt;/lintOptions&gt;</code></pre>
        <p>
          If you feel strongly about lint, you can ask zipper to abort
          when warnings are encountered:
<pre><code>&lt;lintFailOnWarning&gt;true&lt;/lintFailOnWarning&gt;</code></pre>

        </p>
      </dd>
      
      <dt id="configuration_js_optimization">JavaScript optimization</dt>
      <dd>
        <p>
          Once lint checking is complete, your JavaScript will be optimized
          using the <a href="http://code.google.com/closure/compiler/">Closure 
          Compiler</a>.  You can control the the Closure execution by passing
          an options string containing any combination of 
          <a href="http://code.google.com/closure/compiler/docs/overview.html">
          documented options</a>.  For example, the following will enable 
          advanced optimizations:
        </p>
<pre><code>&lt;optimizeOptions&gt;
  --compilation_level ADVANCED_OPTIMIZATIONS
&lt;/optimizeOptions&gt;</code></pre>
      </dd>
      
      <dt id="configration_css">CSS minification</dt>
      <dd>
        zipper will pass your CSS files through YUI Compressor's 
        <a href="http://developer.yahoo.com/yui/compressor/css.html">
        CSS minifier</a>.  The only option available here is the
        <em>minifyLineBreak</em> option, which will force
        a line break in the output at the given column number:
<pre><code>&lt;minifyLineBreak&gt;80&lt;/minifyLineBreak&gt;</code></pre>
      </dd>
      
      <dt id="configration_grouping">asset grouping</dt>
      <dd>
        <p>
          zipper's asset grouping feature allows you to group particular assets
          together, in a particular order, into a single gzipped resource.
          JavaScript and CSS groups are configured separately.  
        </p>
        <p>
          The following example creates one concatentated JavaScript asset consisting of 
          the optimized version of prototype.js, followed by the optimized versions of 
          all other JavaScript files in the project.  This asset will
          then be gzipped and given a name according the the <em>name</em>
          option, and saved in a newly created 'static' directory.  The 
          <em>groupOutputDirectory</em> and 
          <em>gzip</em> options are optional, and default to <strong> 
          static</strong> and <strong>true</strong>.
        </p>
<pre><code>&lt;groupOutputDirectory&gt;static&lt;groupOutputDirectory&gt;
&lt;javascriptGroups&gt;
  &lt;javascriptGroup&gt;
    &lt;gzip&gt;true&lt;gzip&gt;
    &lt;name&gt;common&lt;name&gt;
    &lt;includes&gt;
      &lt;include&gt;prototype.js&lt;include&gt; 
      &lt;include&gt;**/*.js&lt;include&gt; 
    &lt;includes&gt;
  &lt;javascriptGroup&gt;
&lt;javascriptGroups&gt;
</code></pre>

        <p>
          The stylesheet configuration is nearly identical:
        </p>
<pre><code>&lt;stylesheetGroups&gt;
  &lt;stylesheetGroup&gt;
    &lt;name&gt;barfoo&lt;name&gt;
    &lt;includes&gt;
      &lt;include&gt;css&lt;include&gt;
    &lt;includes&gt;
  &lt;stylesheetGroup&gt;
&lt;stylesheetGroups&gt;
</code></pre>

        <p>
          If you choose not to configure any groups, the default behavior
          will bundle all of your JavaScript files into a single
          script-all.js.gz file, and all of your stylesheets into a single
          style-all.css.gz file.
        </p>
      </dd>
    </dl>
  </body>
</html>

